# ~/.tmux.conf managed by dotfiles (stow).

# Use vi keys in copy mode
set -g mode-keys vi
setw -g mode-keys vi

# Consistent terminal setting
set -g default-terminal "tmux-256color"

# Prefix: C-space
unbind C-b
set -g prefix C-Space
bind C-Space send-prefix

# Indices and history
set -g base-index 1
setw -g pane-base-index 1
set -g renumber-windows on
set -g history-limit 100000

# Input/UX tuning
set -g escape-time 0
set -g repeat-time 300
set -g mouse off
set -g focus-events on
set -ga terminal-overrides ",xterm-256color:Tc"

# Splits and reload
bind | split-window -h
bind - split-window -v
bind r source-file ~/.tmux.conf \; display-message "tmux reloaded"

# Fast pane navigation (no prefix)
bind -n C-h select-pane -L
bind -n C-j select-pane -D
bind -n C-k select-pane -U
bind -n C-l select-pane -R

# Resize panes with Alt + hjkl
bind -n M-h resize-pane -L 5
bind -n M-j resize-pane -D 5
bind -n M-k resize-pane -U 5
bind -n M-l resize-pane -R 5

# Copy mode (vi) with WSL clipboard
set -g set-clipboard on
bind -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "win32yank.exe -i --crlf"

# Status line (minimal)
set -g status-interval 5
set -g status-left "#S"
set -g status-right "#(whoami) | %Y-%m-%d %H:%M"

# TPM plugins
set -g @plugin "tmux-plugins/tpm"
set -g @plugin "tmux-plugins/tmux-sensible"
set -g @plugin "christoomey/vim-tmux-navigator"
set -g @plugin "tmux-plugins/tmux-resurrect"
set -g @plugin "tmux-plugins/tmux-continuum"
set -g @plugin "tmux-plugins/tmux-yank"
set -g @plugin "tmux-plugins/tmux-prefix-highlight"

set -g @continuum-restore "off"
set -g @resurrect-capture-pane-contents "on"
set -g @yank_action "copy-pipe"

# TPM init (keep at bottom)
run "~/.tmux/plugins/tpm/tpm"
